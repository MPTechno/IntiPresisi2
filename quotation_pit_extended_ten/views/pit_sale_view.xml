<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>

		<!-- SALE ORDER VIEW -->

		<record model="ir.ui.view" id="quotation_per_quotation_form_view">
			<field name="name">Quotation</field>
			<field name="model">sale.order</field>
			<field name="inherit_id" ref="sale.view_order_form"/>
			<field name="arch" type="xml">
				<data>
					<xpath expr="//button[@name='action_quotation_send']" position="replace"></xpath>
					<xpath expr="//button[@name='action_quotation_send']" position="replace">
						<button name="action_quotation_send_stage" string="Quotation Send" type="object" class="btn-primary"/>
					</xpath>
					<xpath expr="//button[@name='action_confirm']" position="replace"></xpath>
					<xpath expr="//button[@name='action_confirm']" position="replace">
						<button name="%(action_crm_crm_askcode_ponumber_action)d" attrs="{'invisible': [('hide_confirm', '=', True)]}"  string="Confirm Sale" class="btn-primary o_sale_confirm" type="action" />
						<button name="%(action_pricelist_line_by_partner)d" type="action" string="Pricelist Orderline" class="oe_highlight" attrs="{'invisible': [('partner_id', '=', False)]}" context="{'partner_id':partner_id,'pricelist_id':pricelist_id}"/>
					</xpath>
					<xpath expr="//field[@name='partner_id']" position="attributes">
						<attribute name="domain">[('supplier','!=',True)]</attribute>
					</xpath>
					<xpath expr="//field[@name='order_line']/form/group/group//field[@name='product_id']" position="before">
						<field name="check_uid" invisible="1"/>
						<field name="confirm_line_box" string="Confirm Line" attrs="{'invisible': [('stat_line', '=', 'so')]}"/>
						<field name="stat_line" invisible="1"></field>
					</xpath>
					<xpath expr="//field[@name='order_line']/tree//field[@name='product_id']" position="before">
						<field name="confirm_line_box" nolabel="1"/>
					</xpath>
					<xpath expr="//field[@name='order_line']/tree//field[@name='price_total']" position="after">
						<field name="stat_line"/>
						<field name="check_uid" invisible="1"/>
					</xpath>
					<xpath expr="//field[@name='partner_shipping_id']" position="after">
						<field name="hide_confirm" invisible="1"/>
					</xpath>
					<xpath expr="//field[@name='date_order']" position="after">
						<field name="validity_new_date"/>
					</xpath>
					<xpath expr="//field[@name='validity_date']" position="attributes">
						<attribute name="invisible">1</attribute>
					</xpath>
					<xpath expr="//field[@name='partner_id']" position="before">
						<field name="po_num" attrs="{'invisible': [('state','!=','sale')]}"/>
					</xpath>
					<xpath expr="//field[@name='order_line']/form/group/group//field[@name='price_unit']" position="replace">
						<field name="price_unit" attrs="{'readonly':[('check_uid','=',True)]}"></field>
					</xpath>
					<xpath expr="//field[@name='order_line']/tree//field[@name='price_unit']" position="replace">
						<field name="price_unit" attrs="{'readonly':[('check_uid','=',True)]}"></field>
					</xpath>
				</data>
			</field>
		</record>


		<record model="ir.ui.view" id="quotation_per_quotation_trre_crm_phonecall_view">
			<field name="name">Phonecall</field>
			<field name="model">crm.phonecall</field>
			<field name="inherit_id" ref="crm_phonecall.crm_case_inbound_phone_tree_view"/>
			<field name="arch" type="xml">
				<data>
					<field name="partner_id" position="after">
						<field name="contact_name"/>
						<field name="prospect_id" invisible="1"/>
					</field>
					<field name="partner_id" position="attributes">
						<attribute name="invisible">1</attribute>
					</field>
				</data>
			</field>
		</record>

		<record model="ir.ui.view" id="quotation_per_quotation_res_company_view">
			<field name="name">Company</field>
			<field name="model">res.company</field>
			<field name="inherit_id" ref="base.view_company_form"/>
			<field name="arch" type="xml">
				<data>
					<field name="currency_id" position="after">
						<field name="sign_line_text"/>
					</field>
				</data>
			</field>
		</record>

		<!-- FOR LEAD FIELD READONLY -->

		<record id="view_crm_prospect_sales_person_ref_readonly" model="ir.ui.view">
		    <field name="name">crm.lead.sales.person.readonly.cust</field>
		    <field name="model">crm.lead</field>
		    <field name="priority" eval="20"/>
		    <field name="inherit_id" ref="crm.crm_case_form_view_leads"/>
		    <field name="groups_id" eval="[(6, 0, [ref('quotation_pit_extended_ten.group_field_readonly_forad')])]"/>
		    <field name="arch" type="xml">
		        <field name='user_id' position="attributes">
		            <attribute name="readonly">0</attribute>
		        </field>
		    </field>
		</record>

		<!-- FOR ACCOUTN FIELD READONLY -->

		<record id="view_res_paerner_sales_manager_ref_readonly" model="ir.ui.view">
		    <field name="name">res.partner.sales.manager.readonly.cust</field>
		    <field name="model">res.partner</field>
		    <field name="priority" eval="20"/>
		    <field name="inherit_id" ref="base.view_partner_form"/>
		    <field name="groups_id" eval="[(6, 0, [ref('quotation_pit_extended_ten.group_field_readonly_forad')])]"/>
		    <field name="arch" type="xml">
		        <field name='user_id' position="attributes">
		            <attribute name="readonly">0</attribute>
		        </field>
		    </field>
		</record>

		<!-- FOR ENQUIRY FIELD READONLY -->

		<record id="view_crm_enquiry_sales_manager_ref_readonly" model="ir.ui.view">
		    <field name="name">crm.lead.sales.manager.readonly.cust</field>
		    <field name="model">crm.lead</field>
		    <field name="inherit_id" ref="quotation_pit_extended_ten.quotation_per_opportunity_form_view"/>
		    <field name="groups_id" eval="[(6, 0, [ref('quotation_pit_extended_ten.group_field_readonly_forad')])]"/>
		    <field name="arch" type="xml">
		        <field name='user_id' position="attributes">
		            <attribute name="readonly">0</attribute>
		        </field>
		    </field>
		</record>

		<!-- FOR QUOTATION FIELD READONLY -->

		<record id="view_quotation_cust_ref_readonly" model="ir.ui.view">
		    <field name="name">quotation.form.readonly.cust</field>
		    <field name="model">sale.order</field>
		    <field name="inherit_id" ref="sale.view_order_form"/>
		    <field name="arch" type="xml">
		    	<xpath expr='//notebook/page[2]/group/group/field[@name="user_id"]' position="replace">
		    		<field name="user_id" string="Our Referece" readonly="1"/>
		    	</xpath>
		    </field>
		</record>

		<record id="view_quotation_sales_manager_ref_readonly" model="ir.ui.view">
		    <field name="name">quotation.sales.manager.readonly.cust</field>
		    <field name="model">sale.order</field>
		    <field name="priority" eval="20"/>
		    <field name="inherit_id" ref="quotation_pit_extended_ten.view_quotation_cust_ref_readonly"/>
		    <field name="groups_id" eval="[(6, 0, [ref('quotation_pit_extended_ten.group_field_readonly_forad')])]"/>
		    <field name="arch" type="xml">
		    	<xpath expr='//notebook/page[2]/group/group/field[@name="user_id"]' position="replace">
		    		<field name="user_id" string="Our Referece" readonly="0"/>
		    	</xpath>
		    </field>
		</record>


		<!-- PRICELIST FORM VIEW -->

		<record id="view_changer_product_pricelist_form_view" model="ir.ui.view">
		    <field name="name">change.product.price</field>
		    <field name="model">product.pricelist</field>
		    <field name="inherit_id" ref="product.product_pricelist_view"/>
		    <field name="arch" type="xml">
		    	<xpath expr="//field[@name='item_ids']/tree//field[@name='name']" position="after">
		    		<field name="part_number"/>
		    		<field name="drawing_number"/>
		    		<field name="pricing_date"/>
		    	</xpath>
		    </field>
		</record>

		<record id="view_product_pricelist_item_filter" model="ir.ui.view">
		    <field name="name">product.pricelist.ytm.select</field>
		    <field name="model">product.pricelist.item</field>
		    <field name="arch" type="xml">
		        <search string="Search Priselist Line">
		            <field name="product_id"/>
		            <field name="drawing_number"/>
		            <field name="part_number"/>
		            <separator/>
		            <group expand="0" string="Group By">
		                <filter string="Product" domain="[]" context="{'group_by':'product_id'}"/>
		                <filter string="Price History" domain="[]" context="{'group_by':'part_number'}"/>
		                <filter string="Price Date" domain="[]" context="{'group_by':'pricing_date'}"/>
		            </group>
		       </search>
		    </field>
		</record>

		<record id="view_changer_product_pricelist_tree_view" model="ir.ui.view">
		    <field name="name">change.product.price.tree</field>
		    <field name="model">product.pricelist.item</field>
		    <field name="arch" type="xml">
		    	<tree string="Add Pricelist line">
		    		<field name="product_id"/>
		    		<field name="part_number"/>
		    		<field name="drawing_number"/>
		    		<field name="product_id"/>
		    		<field name="fixed_price"/>
		    		<field name="pricing_date"/>
		    	</tree>
		    </field>
		</record>
	</data>
</openerp>